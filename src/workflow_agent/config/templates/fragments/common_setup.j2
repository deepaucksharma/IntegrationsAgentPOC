# Common setup for all installations
log_message() {
  echo "[$(date '+%Y-%m-%d %H:%M:%S')] $1"
}

error_exit() {
  log_message "ERROR: $1"
  exit 1
}

# Create a temporary directory for downloads
TMP_DIR=$(mktemp -d)
log_message "Created temporary directory: $TMP_DIR"

# Cleanup function
cleanup() {
  if [ -d "$TMP_DIR" ]; then
    rm -rf "$TMP_DIR"
    log_message "Cleaned up temporary directory"
  fi
}

# Register cleanup on exit
trap cleanup EXIT
log_message "Starting {{ target_name }} installation" 