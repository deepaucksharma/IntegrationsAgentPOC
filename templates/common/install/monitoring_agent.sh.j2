{% import "macros/common.sh.j2" as common %}
#!/bin/bash

{{ common.setup_logging() }}
{{ common.error_handling() }}
{{ common.check_prerequisites() }}

# Create installation directory
log_info "Creating installation directory..."
mkdir -p /opt/monitoring

# Write configuration
log_info "Writing configuration file..."
cat > /opt/monitoring/config.yaml << EOL
license_key: {{ parameters.license_key }}
host: {{ parameters.host }}
EOL

# Download and install agent (simulated)
log_info "Downloading monitoring agent..."
sleep 2

# Start agent (simulated)
log_info "Starting monitoring agent..."
sleep 1

log_info "Monitoring agent installed successfully!" 